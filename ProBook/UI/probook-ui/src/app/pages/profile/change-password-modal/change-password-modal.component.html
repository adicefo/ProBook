<div class="modal-container">
    <div class="modal-header">
        <div class="header-icon">
            <mat-icon>vpn_key</mat-icon>
        </div>
        <div class="header-text">
            <h2 mat-dialog-title class="modal-title">Change Password</h2>
            <p class="modal-subtitle">Create a strong password to keep your account secure</p>
        </div>
    </div>

    <mat-dialog-content class="modal-content">
        <form [formGroup]="passwordForm">
            <div class="form-group">
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>New Password</mat-label>
                    <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password"
                        placeholder="Enter new password">
                    <mat-icon matPrefix class="input-icon">lock</mat-icon>
                    <button mat-icon-button matSuffix type="button" (click)="hidePassword = !hidePassword"
                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
                        <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                    <mat-error *ngIf="passwordForm.get('password')?.invalid && passwordForm.get('password')?.touched">
                        {{ getPasswordErrorMessage() }}
                    </mat-error>
                </mat-form-field>

                
            </div>

            <div class="form-group">
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Confirm Password</mat-label>
                    <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" formControlName="confirmPassword"
                        placeholder="Confirm new password">
                    <mat-icon matPrefix class="input-icon">lock_outline</mat-icon>
                    <button mat-icon-button matSuffix type="button" (click)="hideConfirmPassword = !hideConfirmPassword"
                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideConfirmPassword">
                        <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                    <mat-error
                        *ngIf="(passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched) || passwordForm.hasError('passwordMismatch')">
                        {{ getConfirmPasswordErrorMessage() }}
                    </mat-error>
                </mat-form-field>
            </div>

            
        </form>
    </mat-dialog-content>

    <mat-dialog-actions class="modal-actions">
        <button mat-stroked-button type="button" (click)="onCancel()" [disabled]="isSubmitting" class="cancel-btn">
            Cancel
        </button>
        <button mat-raised-button type="button" (click)="onSubmit()" [disabled]="passwordForm.invalid || isSubmitting"
            class="submit-btn">
            <mat-spinner *ngIf="isSubmitting" diameter="20" class="button-spinner"></mat-spinner>
            <mat-icon *ngIf="!isSubmitting">check</mat-icon>
            {{ isSubmitting ? 'Updating...' : 'Update Password' }}
        </button>
    </mat-dialog-actions>
</div>